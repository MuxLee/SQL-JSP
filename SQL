import java.sql.*;
	
public class oracleTutorial {

	public static Connection getConnection () throws ClassNotFoundException, SQLException {
		String user = "system"; //DB 계정
		String pw = "oracle"; //DB 비밀번호
		String url = "jdbc:oracle:thin:@localhost:1521:xe"; // XE => SID
		Connection conn = null;

		Class.forName("oracle.jdbc.driver.OracleDriver");
		conn = DriverManager.getConnection(url, user, pw);
		System.out.println("연결 성공");
		return conn;
	}
	
	public static void selectList () throws ClassNotFoundException, SQLException {
		String sql;
		Connection conn;
		PreparedStatement pstmt;
		ResultSet res;
		conn = getConnection();
		sql = "SELECT * FROM sys.board";
		pstmt = conn.prepareStatement(sql);
		res = pstmt.executeQuery();
		
		while(res.next()) {
			int idx = res.getInt("idx");
            String writer = res.getString("writer");
            String subject = res.getString("subject");
            String content = res.getString("content");
            String date = res.getString("reg_date");
            System.out.println("글번호 : "+idx);
            System.out.println("작성자 : "+writer);
            System.out.println("제목 : "+subject);
            System.out.println("내용 : "+content);
            System.out.println("작성일 : "+date);
            System.out.println("");
            }
	}
	
	public static void main(String[] args) throws ClassNotFoundException, SQLException {
		String sql;
		Connection conn = getConnection();
		PreparedStatement pstmt;
		
		// 일관성을 위해서 테이블 내용 비우기
		sql = "DELETE FROM sys.board";
		conn.prepareStatement(sql).executeUpdate();
		System.out.println("--- 테이블 삭제 ---");
		selectList();
		
		// 테이블 내용 추가
		sql = "INSERT INTO sys.board values(1, '작성자 테스트', '제목 테스트', '내용 테스트', sysdate)";
		conn.prepareStatement(sql).executeQuery();
		sql = "INSERT INTO sys.board values(2, '작성자 테스트', '제목 테스트', '내용 테스트', sysdate)";
		conn.prepareStatement(sql).executeQuery();
		System.out.println("--- 테이블 내용 추가 ---");
		selectList();
		
		// 테이블 내용 수정
		sql = "UPDATE sys.board SET subject = '작성자 수정' where idx = 1";
		conn.prepareStatement(sql).executeQuery();
		System.out.println("--- 테이블 내용 수정 ---");
		selectList();
		}
}
